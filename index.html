<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plan Feedback Wizard – IT Plan (Oct 2025)</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900/50 text-slate-800">
  <!--
    Wizard intent:
    - Keep the stepped flow (Grade → Summary → Improved Plan → Improved Grade)
    - Modal wizard with persistent navigation
    - Each step is focused, scannable, and has persistent context
  -->

  <!-- Modal Overlay -->
  <div class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-start justify-center z-50 p-4 overflow-y-auto">
    <!-- Modal Container -->
    <div class="relative w-full max-w-7xl bg-white rounded-2xl shadow-2xl my-8 flex flex-col max-h-[calc(100vh-4rem)]">
      <!-- Close Button -->
      <button class="absolute top-4 right-4 z-20 p-2 rounded-lg hover:bg-slate-100 transition-colors" onclick="alert('Close modal')">
        <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <!-- Modal Header -->
      <div class="bg-white border-b border-slate-200 rounded-t-2xl sticky top-0 z-10 shadow-sm shrink-0 px-6 lg:px-10 py-4">
        <div class="flex items-center justify-between gap-6">
          <!-- Left: Step Title & Description -->
          <div>
            <h2 class="text-xl font-bold">Plan Feedback</h2>
            <p class="mt-1 text-sm text-slate-500" id="headerDescription">A single, scannable outcome with rationale and tier definition.</p>
          </div>
          
          <!-- Right: Navigation Buttons -->
          <div class="flex gap-2 shrink-0">
            <button id="prevBtnDesktop" class="px-4 py-2 rounded-xl bg-white ring-1 ring-slate-200 shadow-sm hover:bg-slate-50 text-sm" disabled>
              Previous
            </button>
            <button id="nextBtnDesktop" class="px-4 py-2 rounded-xl bg-indigo-600 text-white shadow hover:bg-indigo-700 text-sm">
              Next
            </button>
            <button id="completeBtnDesktop" class="hidden px-4 py-2 rounded-xl bg-emerald-600 text-white shadow hover:bg-emerald-700 text-sm">
              Accept Feedback
            </button>
          </div>
        </div>
      </div>

      <!-- Scrollable Content Area -->
      <div class="flex-1 overflow-y-auto">
        <!-- Context Banner -->
        <div class="bg-slate-50 border-b border-slate-200 px-6 lg:px-10 py-4">
          <div class="max-w-7xl mx-auto flex flex-wrap items-center gap-6">
            <div class="flex items-center gap-3">
              <div class="px-3 py-2 rounded-lg border border-slate-200 bg-white">
                <p class="text-xs text-slate-500">Current</p>
                <p class="mt-0.5 text-sm font-semibold">Silver</p>
              </div>
              <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
              <div class="px-3 py-2 rounded-lg border border-slate-200 bg-white">
                <p class="text-xs text-slate-500">Target</p>
                <p class="mt-0.5 text-sm font-semibold">Gold</p>
              </div>
            </div>
            
            <div class="flex-1 min-w-[300px]">
              <p class="text-xs font-semibold uppercase tracking-wider text-slate-500 mb-2">Maturity ladder</p>
              <div class="grid grid-cols-4 gap-2 text-center text-[11px] font-semibold">
                <div class="rounded-lg border border-slate-200 p-1.5 bg-white">Bronze</div>
                <div class="rounded-lg border-2 border-indigo-400 p-1.5 bg-indigo-50 text-indigo-700">Silver</div>
                <div class="rounded-lg border-2 border-amber-400 p-1.5 bg-amber-50 text-amber-700">Gold</div>
                <div class="rounded-lg border border-slate-200 p-1.5 bg-white">Platinum</div>
              </div>
            </div>
          </div>
        </div>

        <main class="px-6 lg:px-10 py-8">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

        <!-- Left: Stepper + context (sticky) -->
        <aside class="lg:col-span-4 xl:col-span-3">
          <div class="lg:sticky lg:top-6 space-y-6">

            <!-- Stepper -->
            <section class="rounded-2xl bg-white shadow-sm ring-1 ring-slate-200 p-5">
              <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Steps</p>

              <ol class="mt-4 space-y-2" id="stepper">
                <li>
                  <button class="w-full group flex items-center gap-3 rounded-xl px-3 py-3 text-left ring-1 ring-transparent hover:bg-slate-50" data-step="1">
                    <span class="step-dot grid h-7 w-7 place-items-center rounded-full bg-indigo-600 text-white text-xs font-bold">1</span>
                    <span class="flex-1">
                      <span class="block text-sm font-semibold">Grade</span>
                      <span class="block text-xs text-slate-500">Outcome and tier definition</span>
                    </span>
                  </button>
                </li>
                <li>
                  <button class="w-full group flex items-center gap-3 rounded-xl px-3 py-3 text-left ring-1 ring-transparent hover:bg-slate-50" data-step="2">
                    <span class="step-dot grid h-7 w-7 place-items-center rounded-full bg-slate-200 text-slate-700 text-xs font-bold">2</span>
                    <span class="flex-1">
                      <span class="block text-sm font-semibold">Summary</span>
                      <span class="block text-xs text-slate-500">Strengths, weaknesses, omissions</span>
                    </span>
                  </button>
                </li>
                <li>
                  <button class="w-full group flex items-center gap-3 rounded-xl px-3 py-3 text-left ring-1 ring-transparent hover:bg-slate-50" data-step="3">
                    <span class="step-dot grid h-7 w-7 place-items-center rounded-full bg-slate-200 text-slate-700 text-xs font-bold">3</span>
                    <span class="flex-1">
                      <span class="block text-sm font-semibold">Improved Plan</span>
                      <span class="block text-xs text-slate-500">Objective-by-objective improvements</span>
                    </span>
                  </button>
                </li>
                <li>
                  <button class="w-full group flex items-center gap-3 rounded-xl px-3 py-3 text-left ring-1 ring-transparent hover:bg-slate-50" data-step="4">
                    <span class="step-dot grid h-7 w-7 place-items-center rounded-full bg-slate-200 text-slate-700 text-xs font-bold">4</span>
                    <span class="flex-1">
                      <span class="block text-sm font-semibold">Improved Grade</span>
                      <span class="block text-xs text-slate-500">Expected tier after changes</span>
                    </span>
                  </button>
                </li>
              </ol>
            </section>

          </div>
        </aside>

        <!-- Right: Step content -->
        <section class="lg:col-span-8 xl:col-span-9">

          <!-- STEP 1: Grade -->
          <article class="step-panel rounded-2xl bg-white shadow-sm ring-1 ring-slate-200 p-6" data-panel="1" data-title="Grade" data-description="A single, scannable outcome with rationale and tier definition.">
            <div class="flex items-start justify-between gap-4">
              <span class="inline-flex items-center gap-2 rounded-full bg-amber-50 px-3 py-1.5 text-sm font-semibold text-amber-700 ring-1 ring-amber-200">
                <span class="inline-block h-2 w-2 rounded-full bg-amber-500"></span>
                Gold
              </span>
            </div>

            <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="rounded-2xl bg-slate-50 border border-slate-200 p-5">
                <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Tier label</p>
                <p class="mt-1 text-lg font-semibold">Strategic Partner</p>
                <p class="mt-2 text-sm text-slate-600">Aligned and value‑focused.</p>
              </div>
              <div class="md:col-span-2 rounded-2xl bg-white border border-slate-200 p-5">
                <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">What this means</p>
                <p class="mt-2 text-slate-700 leading-relaxed">Clear objectives link to business and stakeholder priorities. Strong governance and data‑driven performance management. Supplier actively engaged in joint improvement, innovation, and digitalisation. Evidence of measurable business value.</p>
              </div>
            </div>

            <div class="mt-6 rounded-2xl bg-indigo-50 border border-indigo-200 p-5">
              <p class="text-sm font-semibold text-indigo-800">What you should do next</p>
              <p class="mt-2 text-sm text-indigo-700">Review the summary to understand what drove the grade, then apply the objective improvements to lock in Gold and identify what would be needed to reach Platinum.</p>
            </div>
          </article>

          <!-- STEP 2: Summary -->
          <article class="step-panel hidden rounded-2xl bg-white shadow-sm ring-1 ring-slate-200 p-6" data-panel="2" data-title="Summary" data-description="A readable narrative plus structured insights you can act on.">
            <div class="mt-6 rounded-2xl border border-slate-200 bg-white p-5">
              <p class="text-sm font-semibold">Narrative summary</p>
              <p class="mt-2 text-slate-700 leading-relaxed">The plan demonstrates clear strategic alignment with stakeholders' goals, emphasising joint innovation, sustainability, and governance. It suggests increased collaboration and shared governance. While strategic intent is strong, it lacks explicit evidence of deep co‑creation and transformational outcomes typical of Platinum. Therefore, it aligns well with Gold: aligned and value‑focused, but not yet demonstrating extensive co‑innovation required for Platinum.</p>
            </div>

            <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4">
              <div class="rounded-2xl border border-indigo-200 bg-indigo-50 p-5">
                <h3 class="text-sm font-semibold text-indigo-800">Strengths</h3>
                <ul class="mt-3 space-y-2 list-disc pl-5 text-sm text-indigo-900/90">
                  <li>High strategic alignment with stakeholder priorities.</li>
                  <li>Emphasis on joint innovation, co‑creation, shared governance.</li>
                  <li>Clear pillars: resilience, digital/green innovation, governance, R&D, analytics.</li>
                  <li>Strong sustainability/green IT focus aligned with ESG commitments.</li>
                </ul>
              </div>
              <div class="rounded-2xl border border-amber-200 bg-amber-50 p-5">
                <h3 class="text-sm font-semibold text-amber-800">Weaknesses</h3>
                <ul class="mt-3 space-y-2 list-disc pl-5 text-sm text-amber-900/90">
                  <li>Lack of explicit measurable targets / KPIs for value creation.</li>
                  <li>Governance mechanisms and joint decision‑making not detailed.</li>
                  <li>Limited focus on social value, community engagement, diversity.</li>
                  <li>Needs clearer continuous improvement and joint risk management.</li>
                </ul>
              </div>
              <div class="rounded-2xl border border-slate-200 bg-slate-50 p-5">
                <h3 class="text-sm font-semibold">Omissions</h3>
                <ul class="mt-3 space-y-2 list-disc pl-5 text-sm text-slate-700">
                  <li>Specific metrics/KPIs to measure objective success.</li>
                  <li>Stakeholder engagement and feedback integration model.</li>
                  <li>Explicit ESG and social value beyond supply chain/green IT.</li>
                  <li>Governance structure, escalation, accountability pathways.</li>
                </ul>
              </div>
            </div>

            <div class="mt-6 rounded-2xl bg-slate-900 text-white p-5">
              <p class="text-sm font-semibold">Fast path to improve scoring</p>
              <p class="mt-2 text-sm text-white/80">Add measurable KPIs, define governance cadence and decision rights, and document how stakeholder feedback is captured and acted upon.</p>
            </div>
          </article>

          <!-- STEP 3: Improved Plan -->
          <article class="step-panel hidden rounded-2xl bg-white shadow-sm ring-1 ring-slate-200 p-6" data-panel="3" data-title="Improved Plan" data-description="Review improvements per objective. Expand only what you need.">
            <div class="flex items-start justify-between gap-4">
              <span class="text-xs text-slate-500">4 objectives • Suggested edits</span>
            </div>

            <!-- Accordion list (better than a wide table) -->
            <div class="mt-6 space-y-3">
              <!-- Objective 1 -->
              <details class="group rounded-2xl border border-slate-200 bg-white p-5" open>
                <summary class="cursor-pointer list-none">
                  <div class="flex items-start justify-between gap-4">
                    <div>
                      <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Objective 1</p>
                      <p class="mt-1 font-semibold">Supply Chain Resilience & Sustainability</p>
                      <p class="mt-1 text-sm text-slate-500">Improved: Supply Chain Sustainability and Resilience</p>
                    </div>
                    <span class="mt-1 inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700 ring-1 ring-emerald-200">High impact</span>
                  </div>
                </summary>

                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Your objective</p>
                    <p class="mt-2 text-sm text-slate-700">Create an integrated supply chain strategy emphasising green sourcing, risk mitigation, and flexible logistics.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Improved description</p>
                    <p class="mt-2 text-sm text-slate-700">Develop a resilient, transparent supply chain with sustainable sourcing, risk management, and real‑time data integration aligned to Net Zero.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Explanation</p>
                    <p class="mt-2 text-sm text-slate-700">Links resilience with sustainability and adds transparency/innovation; reframes as an outcomes‑driven goal suitable for higher maturity.</p>
                  </div>
                </div>
              </details>

              <!-- Objective 2 -->
              <details class="group rounded-2xl border border-slate-200 bg-white p-5">
                <summary class="cursor-pointer list-none">
                  <div class="flex items-start justify-between gap-4">
                    <div>
                      <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Objective 2</p>
                      <p class="mt-1 font-semibold">Digital & Green Innovation Leadership</p>
                      <p class="mt-1 text-sm text-slate-500">Improved: Joint Digital and Green Innovation</p>
                    </div>
                    <span class="mt-1 inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1 text-xs font-semibold text-emerald-700 ring-1 ring-emerald-200">High impact</span>
                  </div>
                </summary>

                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Your objective</p>
                    <p class="mt-2 text-sm text-slate-700">Foster a collaborative environment for co‑developing innovative digital and green IT solutions.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Improved description</p>
                    <p class="mt-2 text-sm text-slate-700">Co‑develop AI‑driven automation and energy‑efficient platforms with shared metrics for measurable improvement.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Explanation</p>
                    <p class="mt-2 text-sm text-slate-700">Strengthens co‑creation and adds measurable outcomes aligned with sustainability and transformation.</p>
                  </div>
                </div>
              </details>

              <!-- Objective 3 -->
              <details class="group rounded-2xl border border-slate-200 bg-white p-5">
                <summary class="cursor-pointer list-none">
                  <div class="flex items-start justify-between gap-4">
                    <div>
                      <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Objective 3</p>
                      <p class="mt-1 font-semibold">Joint Innovation & Governance Framework</p>
                      <p class="mt-1 text-sm text-slate-500">Improved: Collaborative Innovation & Governance</p>
                    </div>
                    <span class="mt-1 inline-flex items-center rounded-full bg-amber-50 px-2.5 py-1 text-xs font-semibold text-amber-700 ring-1 ring-amber-200">Medium impact</span>
                  </div>
                </summary>

                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Your objective</p>
                    <p class="mt-2 text-sm text-slate-700">Establish a joint governance model with shared responsibilities for security, sustainability, and innovation.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Improved description</p>
                    <p class="mt-2 text-sm text-slate-700">Implement a governance framework clarifying decision rights, cadence, escalation paths, and accountability for strategic oversight.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Explanation</p>
                    <p class="mt-2 text-sm text-slate-700">Addresses missing governance detail and strengthens transparency—critical for high maturity.</p>
                  </div>
                </div>
              </details>

              <!-- Objective 4 -->
              <details class="group rounded-2xl border border-slate-200 bg-white p-5">
                <summary class="cursor-pointer list-none">
                  <div class="flex items-start justify-between gap-4">
                    <div>
                      <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Objective 4</p>
                      <p class="mt-1 font-semibold">Joint R&D & Innovation Program</p>
                      <p class="mt-1 text-sm text-slate-500">Improved: Co‑created R&D and Innovation</p>
                    </div>
                    <span class="mt-1 inline-flex items-center rounded-full bg-amber-50 px-2.5 py-1 text-xs font-semibold text-amber-700 ring-1 ring-amber-200">Medium impact</span>
                  </div>
                </summary>

                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Your objective</p>
                    <p class="mt-2 text-sm text-slate-700">Create a structured joint R&D initiative for digital and green technologies.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Improved description</p>
                    <p class="mt-2 text-sm text-slate-700">Formalise a co‑investment roadmap and outcome metrics to ensure innovation-led value creation over time.</p>
                  </div>
                  <div class="rounded-xl bg-white border border-slate-200 p-4">
                    <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Explanation</p>
                    <p class="mt-2 text-sm text-slate-700">Adds long‑term value framing and shared accountability—foundational for Platinum readiness.</p>
                  </div>
                </div>
              </details>
            </div>
          </article>

          <!-- STEP 4: Improved Grade -->
          <article class="step-panel hidden rounded-2xl bg-white shadow-sm ring-1 ring-slate-200 p-6" data-panel="4" data-title="Improved Grade" data-description="Confirm the expected grade after applying improvements.">
            <div class="flex items-start justify-between gap-4">
              <span class="inline-flex items-center gap-2 rounded-full bg-amber-50 px-3 py-1.5 text-sm font-semibold text-amber-700 ring-1 ring-amber-200">
                <span class="inline-block h-2 w-2 rounded-full bg-amber-500"></span>
                Gold
              </span>
            </div>

            <div class="mt-6 rounded-2xl border border-slate-200 bg-white p-5">
              <p class="text-xs font-semibold uppercase tracking-wider text-slate-500">Gold definition</p>
              <p class="mt-2 text-slate-700 leading-relaxed">Strategic Partner: aligned and value-focused. Clear objectives link to business and stakeholder priorities. Strong governance and data-driven performance management. Supplier actively engaged in joint improvement, innovation, and digitalisation. Evidence of measurable business value.</p>
            </div>

            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="rounded-2xl bg-indigo-50 border border-indigo-200 p-5">
                <p class="text-sm font-semibold text-indigo-800">What secured Gold</p>
                <ul class="mt-3 space-y-2 list-disc pl-5 text-sm text-indigo-900/90">
                  <li>Stronger governance and decision rights</li>
                  <li>Measurable KPIs and cadence</li>
                  <li>Clear alignment to stakeholder outcomes</li>
                </ul>
              </div>
              <div class="rounded-2xl bg-slate-900 text-white p-5">
                <p class="text-sm font-semibold">What’s needed for Platinum</p>
                <ul class="mt-3 space-y-2 list-disc pl-5 text-sm text-white/80">
                  <li>Deep co‑creation evidence and shared investment</li>
                  <li>Shared risk/reward mechanisms</li>
                  <li>Transformational outcomes tracked over time</li>
                </ul>
              </div>
            </div>

            <div class="mt-6 rounded-2xl bg-slate-50 border border-slate-200 p-5">
              <p class="text-sm font-semibold">Finish</p>
              <p class="mt-2 text-sm text-slate-600">Complete to save the feedback outcome and attach it to the plan’s history. You can revisit any step at any time.</p>
            </div>
          </article>

        </section>
      </div>
        </main>
      </div>
    </div>
  </div>

  <script>
    // Minimal wizard controller for the mockup.
    document.addEventListener('DOMContentLoaded', function() {
      const panels = Array.from(document.querySelectorAll('.step-panel'));
      const stepButtons = Array.from(document.querySelectorAll('[data-step]'));
      const stepper = document.getElementById('stepper');

      const prevBtnDesktop = document.getElementById('prevBtnDesktop');
      const nextBtnDesktop = document.getElementById('nextBtnDesktop');
      const completeBtnDesktop = document.getElementById('completeBtnDesktop');

      const headerDescription = document.getElementById('headerDescription');

      const stepMeta = {
        1: { title: 'Grade', hint: 'Outcome and tier definition' },
        2: { title: 'Summary', hint: 'Strengths, weaknesses, omissions' },
        3: { title: 'Improved Plan', hint: 'Objective-by-objective improvements' },
        4: { title: 'Improved Grade', hint: 'Expected tier after changes' },
      };

      let current = 1;

      function setStepperState(step) {
        // Left stepper buttons
        if (stepper) {
          const items = Array.from(stepper.querySelectorAll('button[data-step]'));
          items.forEach((btn) => {
            const s = Number(btn.getAttribute('data-step'));
            const dot = btn.querySelector('.step-dot');

            btn.classList.remove('bg-slate-50');
            btn.classList.remove('ring-1');
            btn.classList.remove('ring-indigo-200');

            if (dot) {
              dot.classList.remove('bg-slate-200', 'text-slate-700', 'bg-indigo-600', 'text-white');
              if (s === step) {
                dot.classList.add('bg-indigo-600', 'text-white');
                btn.classList.add('bg-slate-50', 'ring-1', 'ring-indigo-200');
              } else {
                dot.classList.add('bg-slate-200', 'text-slate-700');
              }
            }
          });
        }

        // Update header description
        const currentPanel = panels.find(p => Number(p.getAttribute('data-panel')) === step);
        if (currentPanel && headerDescription) {
          headerDescription.textContent = currentPanel.getAttribute('data-description') || stepMeta[step].hint;
        }

        // Buttons state
        const allPrevBtns = [prevBtnDesktop].filter(Boolean);
        const allNextBtns = [nextBtnDesktop].filter(Boolean);
        const allCompleteBtns = [completeBtnDesktop].filter(Boolean);

        allPrevBtns.forEach(btn => {
          if (step === 1) {
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');
          } else {
            btn.disabled = false;
            btn.classList.remove('opacity-50', 'cursor-not-allowed');
          }
        });

        allNextBtns.forEach(btn => {
          if (step === 4) {
            btn.classList.add('hidden');
          } else {
            btn.classList.remove('hidden');
          }
        });

        allCompleteBtns.forEach(btn => {
          if (step === 4) {
            btn.classList.remove('hidden');
          } else {
            btn.classList.add('hidden');
          }
        });
      }

      function showStep(step) {
        current = step;
        panels.forEach((p) => {
          const s = Number(p.getAttribute('data-panel'));
          p.classList.toggle('hidden', s !== step);
        });
        setStepperState(step);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }

      // Step clicks (sidebar + mobile)
      stepButtons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const step = Number(btn.getAttribute('data-step'));
          if (step >= 1 && step <= 4) showStep(step);
        });
      });

      // Footer nav - handle both mobile and desktop buttons
      const handlePrev = () => {
        if (current > 1) {
          showStep(current - 1);
        }
      };
      const handleNext = () => {
        if (current < 4) {
          showStep(current + 1);
        }
      };
      const handleComplete = () => alert('Feedback accepted – mock action');
      
      if (prevBtnDesktop) prevBtnDesktop.addEventListener('click', handlePrev);
      if (nextBtnDesktop) nextBtnDesktop.addEventListener('click', handleNext);
      if (completeBtnDesktop) completeBtnDesktop.addEventListener('click', handleComplete);

      // Init
      showStep(1);
    });
  </script>
</body>
</html>
